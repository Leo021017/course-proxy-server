# 序言

上了两年的大学，也做了一些web项目，但始终对一个完整的web应用程序的设计和web应用的原理没有准确完整的概念，大概也仅限于调了几个包，copy了一些代码，能跑起来就行，于是趁着产品开发实践课设，希望能借此机会梳理一下一个web程序到底是如何构建起来的，这篇博客可能会有很多的感悟和一些细节，会将产品开发中遇到的问题都记录下来。

# 后端

## 什么是web程序

为什么叫web是一个应用程序呢？因为他本质上就是接受一个输入，给出一个输出嘛，只不过输入输出的方式不再是通过命令行的方式，所以web程序最重要的一定是如何处理数据和如何输入输出数据，前者是web程序的逻辑，后者是网络协议的作用（包括wsgi，其实就是为了我输入数据的标准化和统一化）而是通过网络协议的方式，而许多的保护措施正是为了我的输入输出信道的安全

## Django框架

下面这张图宏观描述了Django框架的结构，我认为django的好处是将web应用的几个部分都独立出来，模块化做的很好，相比flask框架，flask更像是一种简化，比如flask使用装饰器进行路由绑定，但django真正意义上将web程序独立成了各个工具的组合，django的重点是**View**模块，这是处理请求，返回响应的部分，通常来说，urls.py将请求路由到views.py，views.py通过ORM提供的方法对models.py，即数据库进行增删改查；不同的功能模块在django中可以分别定义不同的app



<img src="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django/Introduction/basic-django.png" alt="img" style="zoom:70%;" />

## Celery

我们在项目过程中会经常会遇到一些耗时的任务, 比如：发送邮件、发送短信、大数据统计等等，这些操作耗时长，同步执行对用户体验非常不友好，那么在这种情况下就需要实现异步执行。

异步执行前端一般使用Ajax，后端使用Celery

## Json

以前觉得json不重要，不就是一种数据格式吗？现在发现json远比我认为的重要，互联网这么多协议最重要的是什么？当然是一个统一的标准，json就为数据的传输定义了一套标准，如果任何程序的输入输出都是json格式的，那我们的后端或者前端不就可以自由组合了吗，一个HTTP的后端接口可以给安卓程序使用，因为他们的数据格式都是json！

在Django中，视图层处理完相关逻辑后需要返回一个响应，这个响应必须是HttpResponseBase类或其子类的对象，比如HttpResponse，但这个只是将数据简单拼接在一起，而另一个子类JsonResponse则会将数据转化成json格式进行响应，返回的`content-type`字段不再是`text/html`，而是`application/json`





